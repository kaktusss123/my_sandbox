{
    "_task_id": "AVITO_HTML",
    "_start_urls": [
      
    ],
    "_segment": "Коммерческая Недвижимость",
    "_operation": "",
    "_federal_subject": "",
    "_source": "https://www.avito.ru",
    "project_id": "metaspider",
    "spider_id": "metacrawler",
    "global_settings": {
        "CONCURRENT_REQUESTS": 1024,
        "SPLASH_URL": "http://0.0.0.0:8050",
        "LOG_LEVEL": "INFO",
        "AUTOTHROTTLE_ENABLED": false,
        "AUTOTHROTTLE_START_DELAY": 1,
        "AUTOTHROTTLE_MAX_DELAY": 60,
        "AUTOTHROTTLE_TARGET_CONCURRENCY": 1024,
        "CONCURRENT_REQUESTS_PER_DOMAIN": 1024,
        "RETRY_ENABLED": true,
        "RETRY_HTTP_CODES": [
            500,
            503,
            502,
            504,
            400,
            403,
            408,
            429,
            505,
            303,
            302,
            301,
            307,
            410,
            451
        ],
        "HTTPERROR_ALLOWED_CODES": [],
        "RETRY_TIMES": 20,
        "ROBOTSTXT_ENABLED": false,
        "ROBOTSTXT_OBEY": false,
        "REDIRECT_ENABLED": false,
        "COOKIES_ENABLED": false,
        "DOWNLOAD_FAIL_ON_DATALOSS": true,
        "RANDOM_UA_TYPE": "random",
        "DOWNLOAD_TIMEOUT": 60,
        "CLOSESPIDER_ITEMCOUNT": 0,
        "CLOSESPIDER_ERRORCOUNT": 0
    },
    "methods": {
        "crawling_type": "common",
        "filter_duplicates": true,
        "allowed_domains": [
            "avito.ru"
        ],
        "proxy_settings": {
            "types": [
                "https"
            ],
            "amount": 10000,
            "save": false
        }
    },
    "crawl_tree": [
        {
            "pagination_urls": {
                "path": "//span[@class='pagination-page pagination-page_current']/following-sibling::a[1]/@href"
            },
            "item_urls": {
                "path": "//a[@class='item-description-title-link']/@href"
            }
        }
    ],
    "item_page": {
        "fields": {
            "segment": {
                "type": "list to string",
                "path": "//a[@class='js-breadcrumbs-link js-breadcrumbs-link-interaction']/text()",
                "regex": "Квартир|Комнат|Дома, дачи, коттеджи|Земельные участки|Гаражи и машиноместа|Коммерческая недвижимость",
                "operations": []
            },
            "price_term": {
                "type": "string",
                "path": "(//span[@itemprop='priceCurrency']/following-sibling::text())[1]",
                "regex": "в месяц|в год|в неделю|еженедельно|понедельно|ежедневно|в мес|/год|/мес",
                "operations": []
            },
            "source_latitude": {
                "type": "float",
                "path": "//div[@class='b-search-map expanded item-map-wrapper js-item-map-wrapper']/@data-map-lat",
                "operations": []
            },
            "price_currency": {
                "type": "string",
                "path": "//div[@class='sticky-header-prop sticky-header-price']//span[@itemprop='priceCurrency']/@content",
                "operations": []
            },
            "address": {
                "type": "string",
                "path": "//span[@itemprop='streetAddress']/text()",
                "operations": []
            },
            "purpose": {
                "type": "string",
                "path": "//div[@class='breadcrumbs js-breadcrumbs ']/a[last()]/text()",
                "operations": []
            },
            "source_longitude": {
                "type": "float",
                "path": "//div[@class='b-search-map expanded item-map-wrapper js-item-map-wrapper']/@data-map-lon",
                "operations": []
            },
            "seller_name": {
                "type": "string",
                "path": "(//div[@class='seller-info-value']//a/text())[1]",
                "operations": []
            },
            "company_name": {
                "type": "string",
                "path": "(//div[@class='seller-info-col']/div[@class='seller-info-value']/following-sibling::div[1]/text())[1]",
                "operations": []
            },
            "addit_comm_condition": {
                "type": "list to string",
                "path": "//div[@class='item-price-sub-price']/text()",
                "operations": []
            },
            "date_info": {
                "type": "date",
                "time": "now",
                "operations": []
            },
            "operation": {
                "type": "list to string",
                "path": "//a[@class='js-breadcrumbs-link js-breadcrumbs-link-interaction']/text()",
                "regex": "Снять|Купить",
                "operations": []
            },
            "title_name": {
                "type": "string",
                "path": "//span[@class='title-info-title-text']/text()",
                "operations": []
            },
            "price_total": {
                "type": "float",
                "path": "//div[@class='sticky-header-prop sticky-header-price']//span[@class='js-item-price']/@content",
                "operations": []
            },
            "date_created": {
                "type": "date",
                "path": "//div[@class='title-info-metadata-item']/text()",
                "time": "from string",
                "regex": "размещено(.+)",
                "operations": []
            },
            "federal_subject": {
                "type": "string",
                "path": "//select[@id='region']/option[2]/text()",
                "operations": []
            },
            "description": {
                "type": "list to string",
                "path": "//div[contains(@itemprop,'description')]//text()",
                "operations": []
            },
            "address_city": {
                "type": "string",
                "path": "//meta[@itemprop='addressLocality']/@content",
                "operations": []
            }
        },
        "tables": {
            "table": {
                "_keys_path": "//span[@class='item-params-label']/text()",
                "_vals_path": "//span[@class='item-params-label']/../text()[2]",
                "key_converter": {
                    "отдельный_вход": {
                        "type": "string",
                        "name": "private_entrance"
                    },
                    "площадь": {
                        "type": "float",
                        "name": "area_total",
                        "regex": "(\\d*.\\d*).\\w+"
                    },
                    "расстояние_до_города": {
                        "type": "float",
                        "name": "from_the_town"
                    },
                    "класс_здания": {
                        "type": "string",
                        "name": "object_class"
                    },
                    "назначение_участка": {
                        "type": "string",
                        "name": "purpose"
                    }
                }
            },
            "land": {
                "_keys_path": "//div[@class='item-params']/span/span/text()",
                "_vals_path": "//div[@class='item-params']/span/text()",
                "key_converter": {
                    "отдельный_вход": {
                        "type": "string",
                        "name": "private_entrance"
                    },
                    "площадь": {
                        "type": "float",
                        "name": "area_total",
                        "regex": "(\\d*.\\d*).\\w+"
                    },
                    "расстояние_до_города": {
                        "type": "float",
                        "name": "from_the_town"
                    },
                    "класс_здания": {
                        "type": "string",
                        "name": "object_class"
                    },
                    "назначение_участка": {
                        "type": "string",
                        "name": "purpose"
                    }
                }
            },
            "table_flats": {
                "_keys_path": "//span[@class='item-params-label']/text()",
                "_vals_path": "//li[@class='item-params-list-item']/text()[normalize-space()]",
                "key_converter": {
                    "этаж": {
                        "type": "float",
                        "name": "floor",
                        "regex": "^\\d+"
                    },
                    "официальный_застройщик": {
                        "type": "string",
                        "name": "developer_name"
                    },
                    "количество_комнат": {
                        "type": "string",
                        "name": "rooms_cnt"
                    },
                    "жилая_площадь": {
                        "type": "float",
                        "name": "area_living",
                        "regex": "^\\d+\\W?\\d*"
                    },
                    "этажей_в_доме": {
                        "type": "float",
                        "name": "floors_max",
                        "regex": "^\\d+"
                    },
                    "площадь_кухни": {
                        "type": "float",
                        "name": "kitchen_area",
                        "regex": "^\\d+\\W?\\d*"
                    },
                    "общая_площадь": {
                        "type": [
                            "float",
                            "string"
                        ],
                        "name": [
                            "area_total",
                            "area_total_unit"
                        ],
                        "regex": [
                            "^\\d+\\W?\\d*",
                            "[А-Яа-я]+"
                        ]
                    },
                    "тип_дома": {
                        "type": "string",
                        "name": "wall_material"
                    }
                }
            }
        },
        "follow": [
            {
                "url_constructor": {
                    "insert": {
                        "www.avito.ru": {
                            "type": "string",
                            "value": "m.avito.ru"
                        }
                    }
                },
                "fields": {
                    "phone": {
                        "type": "phone",
                        "path": "//a[contains(@href,'tel:')]/@href"
                    }
                },
                "headers": {
                    "User-Agent": {
                        "type": "string", "value": "false"
                    }
                },
                "methods": {
                    "crawling_type": "common",
                    "filter_duplicates": false,
                    "allowed_domains": [],
                    "proxy_settings": {
                        "types": [
                            "https"
                        ],
                        "amount": 10000,
                        "save": false
                    }
                }
            }
        ]
    }
}