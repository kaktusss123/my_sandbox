{
  "_task_id": "333",
  "_start_urls": [
    "https://msk.nndv.ru/kommercheskaia/",
    "https://spb.nndv.ru/kommercheskaia/",
    "https://svs.nndv.ru/kommercheskaia/",
    "https://ady.nndv.ru/kommercheskaia/",
    "https://alr.nndv.ru/kommercheskaia/",
    "https://alt.nndv.ru/kommercheskaia/",
    "https://amu.nndv.ru/kommercheskaia/",
    "https://ark.nndv.ru/kommercheskaia/",
    "https://ast.nndv.ru/kommercheskaia/",
    "https://bsh.nndv.ru/kommercheskaia/",
    "https://bel.nndv.ru/kommercheskaia/",
    "https://bry.nndv.ru/kommercheskaia/",
    "https://bur.nndv.ru/kommercheskaia/",
    "https://vla.nndv.ru/kommercheskaia/",
    "https://vgg.nndv.ru/kommercheskaia/",
    "https://vlg.nndv.ru/kommercheskaia/",
    "https://vor.nndv.ru/kommercheskaia/",
    "https://yev.nndv.ru/kommercheskaia/",
    "https://chi.nndv.ru/kommercheskaia/",
    "https://iva.nndv.ru/kommercheskaia/",
    "https://irk.nndv.ru/kommercheskaia/",
    "https://kbb.nndv.ru/kommercheskaia/",
    "https://kgd.nndv.ru/kommercheskaia/",
    "https://klu.nndv.ru/kommercheskaia/",
    "https://kam.nndv.ru/kommercheskaia/",
    "https://krl.nndv.ru/kommercheskaia/",
    "https://kem.nndv.ru/kommercheskaia/",
    "https://kir.nndv.ru/kommercheskaia/",
    "https://kom.nndv.ru/kommercheskaia/",
    "https://kos.nndv.ru/kommercheskaia/",
    "https://kdr.nndv.ru/kommercheskaia/",
    "https://kya.nndv.ru/kommercheskaia/",
    "https://krm.nndv.ru/kommercheskaia/",
    "https://kgn.nndv.ru/kommercheskaia/",
    "https://krs.nndv.ru/kommercheskaia/",
    "https://lno.nndv.ru/kommercheskaia/",
    "https://lip.nndv.ru/kommercheskaia/",
    "https://mag.nndv.ru/kommercheskaia/",
    "https://mal.nndv.ru/kommercheskaia/",
    "https://mrd.nndv.ru/kommercheskaia/",
    "https://mso.nndv.ru/kommercheskaia/",
    "https://mur.nndv.ru/kommercheskaia/",
    "https://niz.nndv.ru/kommercheskaia/",
    "https://ngr.nndv.ru/kommercheskaia/",
    "https://nvs.nndv.ru/kommercheskaia/",
    "https://oms.nndv.ru/kommercheskaia/",
    "https://ore.nndv.ru/kommercheskaia/",
    "https://orl.nndv.ru/kommercheskaia/",
    "https://pnz.nndv.ru/kommercheskaia/",
    "https://per.nndv.ru/kommercheskaia/",
    "https://pri.nndv.ru/kommercheskaia/",
    "https://psk.nndv.ru/kommercheskaia/",
    "https://ros.nndv.ru/kommercheskaia/",
    "https://rya.nndv.ru/kommercheskaia/",
    "https://sam.nndv.ru/kommercheskaia/",
    "https://sar.nndv.ru/kommercheskaia/",
    "https://sah.nndv.ru/kommercheskaia/",
    "https://sak.nndv.ru/kommercheskaia/",
    "https://sve.nndv.ru/kommercheskaia/",
    "https://sea.nndv.ru/kommercheskaia/",
    "https://smo.nndv.ru/kommercheskaia/",
    "https://sta.nndv.ru/kommercheskaia/",
    "https://tam.nndv.ru/kommercheskaia/",
    "https://tat.nndv.ru/kommercheskaia/",
    "https://tve.nndv.ru/kommercheskaia/",
    "https://tom.nndv.ru/kommercheskaia/",
    "https://tul.nndv.ru/kommercheskaia/",
    "https://tyv.nndv.ru/kommercheskaia/",
    "https://tyu.nndv.ru/kommercheskaia/",
    "https://udm.nndv.ru/kommercheskaia/",
    "https://uly.nndv.ru/kommercheskaia/",
    "https://kha.nndv.ru/kommercheskaia/",
    "https://kka.nndv.ru/kommercheskaia/",
    "https://hnt.nndv.ru/kommercheskaia/",
    "https://che.nndv.ru/kommercheskaia/",
    "https://chu.nndv.ru/kommercheskaia/",
    "https://yam.nndv.ru/kommercheskaia/",
    "https://yar.nndv.ru/kommercheskaia/"
  ],
  "_segment": "Коммерческая Недвижимость",
  "_operation": "",
  "_federal_subject": "",
  "_source": "https://nndv.ru",
  "project_id": "metaspider",
  "spider_id": "metacrawler",
  "global_settings": {
    "CONCURRENT_REQUESTS": 1000,
    "SPLASH_URL": "http://0.0.0.0:8050",
    "LOG_LEVEL": "INFO",
    "AUTOTHROTTLE_ENABLED": true,
    "AUTOTHROTTLE_START_DELAY": 1,
    "AUTOTHROTTLE_MAX_DELAY": 60,
    "AUTOTHROTTLE_TARGET_CONCURRENCY": 1000,
    "CONCURRENT_REQUESTS_PER_DOMAIN": 1000,
    "RETRY_ENABLED": true,
    "RETRY_HTTP_CODES": [
      500,
      503,
      504,
      400,
      403,
      408,
      429,
      505,
      404,
      301,
      302,
      303,
      451,
      307,
      410,
      502,
      407
    ],
    "HTTPERROR_ALLOWED_CODES": [],
    "RETRY_TIMES": 20,
    "ROBOTSTXT_ENABLED": false,
    "ROBOTSTXT_OBEY": false,
    "REDIRECT_ENABLED": false,
    "COOKIES_ENABLED": true,
    "DOWNLOAD_FAIL_ON_DATALOSS": false,
    "RANDOM_UA_TYPE": "random",
    "DOWNLOAD_TIMEOUT": 60,
    "CLOSESPIDER_ITEMCOUNT": 0,
    "CLOSESPIDER_ERRORCOUNT": 0
  },
  "methods": {
    "crawling_type": "common",
    "filter_duplicates": true,
    "allowed_domains": [],
    "proxy_settings": {
      "types": [
        "https"
      ],
      "amount": 10000,
      "save": false
    }
  },
  "crawl_tree": [
    {
      "pagination_urls": {
        "path": "//li[@class='active pn']/following-sibling::li[1]/a/@href"
      },
      "item_urls": {
        "path": "//table[contains(@id, 'DXMainTable')]/tbody/tr/td[1]/a/@href"
      }
    }
  ],
  "item_page": {
    "fields": {
      "federal_subject": {
        "type": "string",
        "path": "//label[contains(text(),'Область')]/following-sibling::div/a/text()",
        "operations": []
      },
      "address_city": {
        "type": "string",
        "path": "//label[contains(text(),'Населенный') or contains(text(),'Город')]/following-sibling::div/a/text()",
        "operations": []
      },
      "price_total": {
        "type": "float",
        "path": "//label[contains(text(),'Стоимость')]/following-sibling::div/text()",
        "regex": "\\d+ ?\\d* ?\\d* ?\\d*",
        "operations": []
      },
      "address": {
        "type": "string",
        "path": "//label[contains(text(),'Адрес')]/following-sibling::div//text()"
      },
      "segment_subtype": {
        "type": "string",
        "path": "//label[contains(text(),'Объект')]/following-sibling::div/text()",
        "regex": "офис|склад|магазин|производств|торгов|свободн",
        "operations": []
      },
      "operation": {
        "type": "string",
        "path": "//meta[@property='og:url']/@content",
        "regex": "(?<=\\/)sdam(?=\\/)|(?<=\\/)prodam(?=\\/)",
        "operations": []
      },
      "area_total": {
        "type": "float",
        "path": "//label[contains(text(),'Объект')]/following-sibling::div/text()",
        "regex": "\\d+"
      },
      "description": {
        "type": "string",
        "path": "//label[contains(text(),'Комментарий')]/following-sibling::div/text()",
        "operations": []
      },
      "date_created": {
        "type": "date",
        "path": "//label[contains(text(),'Размещено')]/following-sibling::div/text()",
        "time": "from string",
        "regex": "\\d{2}\\.\\d{2}\\.\\d{4}",
        "operations": []
      },
      "seller_name": {
        "type": "string",
        "path": "//label[contains(text(),'Контакт')]/following-sibling::div/p/text()",
        "regex": "\\w+ ?\\w*",
        "operations": []
      },
      "company_name": {
        "type": "string",
        "path": "//label[contains(text(),'Контакт')]/following-sibling::div/text()[2]",
        "regex": "(?<=фирма: ).*"
      },
      "date_info": {
        "type": "date",
        "time": "now"
      }
    },
    "follow": [
      {
        "url_constructor": {
          "insert": {
            "place_to_insert": {
              "type": "string",
              "path": "//meta[@property='og:url']/@content"
            }
          }
        },
        "fields": {
          "phone": {
            "type": "phone",
            "regex": "(?<=\"tel:).+(?=\"><i)"
          }
        },
        "post_params": {
          "fields": {
            "__VIEWSTATE": {
              "type": "string",
              "path": "//input[@name='__VIEWSTATE']/@value"
            },
            "__CALLBACKID": {
              "type": "string",
              "value": "ctl00$Content$ctl00$ctl04$cpShowPhone"
            },
            "__EVENTVALIDATION": {
              "type": "string",
              "path": "//input[@name='__EVENTVALIDATION']/@value"
            },
            "__VIEWSTATEGENERATOR": {
              "type": "string",
              "path": "//input[@name='__VIEWSTATEGENERATOR']/@value"
            },
            "ctl00$hiddenParam": {
              "type": "string",
              "value": ""
            },
            "ctl00$ctl05$ctl09$votesRadio": {
              "type": "string",
              "value": ""
            },
            "__CALLBACKPARAM": {
              "type": "string",
              "path": "concat('c0:', substring-before(substring-after(string(//form[@id='form1']/@action), '/'), '.'), ';4;')"
            }
          }
        },
        "methods": {
          "crawling_type": "post",
          "content_type": "html",
          "filter_duplicates": false,
          "allowed_domains": [],
          "proxy_settings": {
            "types": [
              "https"
            ],
            "amount": 10000,
            "save": true
          },
          "save_cookies": true
        },
        "url": "place_to_insert"
      }
    ]
  }
}
