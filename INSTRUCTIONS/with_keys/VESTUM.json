{
    "_task_id": "VESTUM",
    "_start_urls": [
        "https://www.vestum.ru/%D0%BE%D1%82%D0%B5%D0%BB%D0%B8/%D1%85%D0%BE%D1%81%D1%82%D0%B5%D0%BB-%D1%87%D0%B5%D1%88%D1%81%D0%BA%D0%B8%D0%B9-%D0%B4%D0%BE%D0%BC/"
    ],
    "_segment": "commercial",
    "_operation": "sale",
    "_federal_subject": "",
    "_source": "VESTUM",
    "global_settings": {
        "CONCURRENT_REQUESTS": 512,
        "SPLASH_URL": "http://0.0.0.0:8050",
        "LOG_LEVEL": "DEBUG",
        "AUTOTHROTTLE_ENABLED": true,
        "AUTOTHROTTLE_START_DELAY": 1.0,
        "AUTOTHROTTLE_MAX_DELAY": 5.0,
        "AUTOTHROTTLE_TARGET_CONCURRENCY": 512,
        "CONCURRENT_REQUESTS_PER_DOMAIN": 512,
        "RETRY_ENABLED": true,
        "RETRY_HTTP_CODES": [500, 503, 504, 400, 403, 408, 429, 505, 404, 303, 302],
        "HTTPERROR_ALLOWED_CODES": [],
        "RETRY_TIMES": 10,
        "ROBOTSTXT_ENABLED": false,
        "ROBOTSTXT_OBEY": false,
        "REDIRECT_ENABLED": false,
        "COOKIES_ENABLED": false,
        "RANDOM_UA_TYPE": "random",
        "DOWNLOAD_TIMEOUT": 60.0
    },
    "crawling_settings": {
        "global_crawling_type": "common",
        "js": "//",
        "rotate_useragents": true,
        "allowed_domains": "",
        "proxy_settings": {
            "types": ["https"],
            "amount": 10000
        }
    },
    "paginations": {
        "methods": {
            "crawling_type": "common",
            "filter_duplicates": true
        },
        "paginations_by_url": {
            "replace_pattern": [
                ["https://www.vestum.ru/продажа-коммерческой-недвижимости/?page=", 1],
                ["https://anapa.vestum.ru/продажа-коммерческой-недвижимости/?page=", 1],
                ["https://gelendzhik.vestum.ru/продажа-коммерческой-недвижимости/?page=", 1],
                ["https://ekaterinburg.vestum.ru/продажа-коммерческой-недвижимости/?page=", 1],
                ["https://krasnodar.vestum.ru/продажа-коммерческой-недвижимости/?page=", 1],
                ["https://nn.vestum.ru/продажа-коммерческой-недвижимости/?page=", 1],
                ["https://novorossiysk.vestum.ru/продажа-коммерческой-недвижимости/?page=", 1],
                ["https://nsk.vestum.ru/продажа-коммерческой-недвижимости/?page=", 1],
                ["https://rostov.vestum.ru/продажа-коммерческой-недвижимости/?page=", 1],
				["https://omsk.vestum.ru/продажа-коммерческой-недвижимости/?page=", 1],

                ["https://www.vestum.ru/купить-квартиру/?page=", 1],
                ["https://anapa.vestum.ru/купить-квартиру/?page=", 1],
                ["https://gelendzhik.vestum.ru/купить-квартиру/?page=", 1],
                ["https://ekaterinburg.vestum.ru/купить-квартиру/?page=", 1],
                ["https://krasnodar.vestum.ru/купить-квартиру/?page=", 1],
                ["https://nn.vestum.ru/купить-квартиру/?page=", 1],
                ["https://novorossiysk.vestum.ru/купить-квартиру/?page=", 1],
                ["https://nsk.vestum.ru/купить-квартиру/?page=", 1],
                ["https://rostov.vestum.ru/купить-квартиру/?page=", 1],
				["https://omsk.vestum.ru/купить-квартиру/?page=", 1],

				["https://www.vestum.ru/купить-дом/?page=", 1],
                ["https://anapa.vestum.ru/купить-дом/?page=", 1],
                ["https://gelendzhik.vestum.ru/купить-дом/?page=", 1],
                ["https://ekaterinburg.vestum.ru/купить-дом/?page=", 1],
                ["https://krasnodar.vestum.ru/купить-дом/?page=", 1],
                ["https://nn.vestum.ru/купить-дом/?page=", 1],
                ["https://novorossiysk.vestum.ru/купить-дом/?page=", 1],
                ["https://nsk.vestum.ru/купить-дом/?page=", 1],
                ["https://rostov.vestum.ru/купить-дом/?page=", 1],
				["https://omsk.vestum.ru/купить-дом/?page=", 1],

				["https://www.vestum.ru/купить-земельный-участок/?page=", 1],
                ["https://anapa.vestum.ru/купить-земельный-участок/?page=", 1],
                ["https://gelendzhik.vestum.ru/купить-земельный-участок/?page=", 1],
                ["https://ekaterinburg.vestum.ru/купить-земельный-участок/?page=", 1],
                ["https://krasnodar.vestum.ru/купить-земельный-участок/?page=", 1],
                ["https://nn.vestum.ru/купить-земельный-участок/?page=", 1],
                ["https://novorossiysk.vestum.ru/купить-земельный-участок/?page=", 1],
                ["https://nsk.vestum.ru/купить-земельный-участок/?page=", 1],
                ["https://rostov.vestum.ru/купить-земельный-участок/?page=", 1],
				["https://omsk.vestum.ru/купить-земельный-участок/?page=", 1],

				["https://www.vestum.ru/купить-гараж/?page=", 1],
                ["https://anapa.vestum.ru/купить-гараж/?page=", 1],
                ["https://gelendzhik.vestum.ru/купить-гараж/?page=", 1],
                ["https://ekaterinburg.vestum.ru/купить-гараж/?page=", 1],
                ["https://krasnodar.vestum.ru/купить-гараж/?page=", 1],
                ["https://nn.vestum.ru/купить-гараж/?page=", 1],
                ["https://novorossiysk.vestum.ru/купить-гараж/?page=", 1],
                ["https://nsk.vestum.ru/купить-гараж/?page=", 1],
                ["https://rostov.vestum.ru/купить-гараж/?page=", 1],
				["https://omsk.vestum.ru/купить-гараж/?page=", 1],

				["https://www.vestum.ru/снять-квартиру/?page=", 1],
                ["https://anapa.vestum.ru/снять-квартиру/?page=", 1],
                ["https://gelendzhik.vestum.ru/снять-квартиру/?page=", 1],
                ["https://ekaterinburg.vestum.ru/снять-квартиру/?page=", 1],
                ["https://krasnodar.vestum.ru/снять-квартиру/?page=", 1],
                ["https://nn.vestum.ru/снять-квартиру/?page=", 1],
                ["https://novorossiysk.vestum.ru/снять-квартиру/?page=", 1],
                ["https://nsk.vestum.ru/снять-квартиру/?page=", 1],
                ["https://rostov.vestum.ru/снять-квартиру/?page=", 1],
				["https://omsk.vestum.ru/снять-квартиру/?page=", 1],

				["https://www.vestum.ru/снять-дом/?page=", 1],
                ["https://anapa.vestum.ru/снять-дом/?page=", 1],
                ["https://gelendzhik.vestum.ru/снять-дом/?page=", 1],
                ["https://ekaterinburg.vestum.ru/снять-дом/?page=", 1],
                ["https://krasnodar.vestum.ru/снять-дом/?page=", 1],
                ["https://nn.vestum.ru/снять-дом/?page=", 1],
                ["https://novorossiysk.vestum.ru/снять-дом/?page=", 1],
                ["https://nsk.vestum.ru/снять-дом/?page=", 1],
                ["https://rostov.vestum.ru/снять-дом/?page=", 1],
				["https://omsk.vestum.ru/снять-дом/?page=", 1],

				["https://www.vestum.ru/аренда-коммерческой-недвижимости/?page=", 1],
                ["https://anapa.vestum.ru/аренда-коммерческой-недвижимости/?page=", 1],
                ["https://gelendzhik.vestum.ru/аренда-коммерческой-недвижимости/?page=", 1],
                ["https://ekaterinburg.vestum.ru/аренда-коммерческой-недвижимости/?page=", 1],
                ["https://krasnodar.vestum.ru/аренда-коммерческой-недвижимости/?page=", 1],
                ["https://nn.vestum.ru/аренда-коммерческой-недвижимости/?page=", 1],
                ["https://novorossiysk.vestum.ru/аренда-коммерческой-недвижимости/?page=", 1],
                ["https://nsk.vestum.ru/аренда-коммерческой-недвижимости/?page=", 1],
                ["https://rostov.vestum.ru/аренда-коммерческой-недвижимости/?page=", 1],
				["https://omsk.vestum.ru/аренда-коммерческой-недвижимости/?page=", 1]
            ],
            "amount": 50,
            "amount_xpath": "//div[@class='catalog-counter']/text()"
        }
    },
    "item_page": {
        "_target_xpath": "//a[@class='card-inf ']/@href",
        "methods": {
            "crawling_type": "common",
            "filter_duplicates": false,
            "js": ""
        },
        "fields": {
            "date_info": {
                "type": "date",
                "time": "now"
            },
			"title_name": {
                "type": "string",
                "xpath": "//h1[@itemprop='name']/text()"
            },
			"rooms_cnt": {
                "type": "string",
                "xpath": "//h1[@itemprop='name']/text()",
				"regex": "\\d(?=-комн)|Студия|Комната|Апартамент"
            },
			"address": {
                "type": "list to string",
                "xpath": "//span[@class='address-link']/text()|//span[@class='address-link']/a/text()"
            },
			"intown_district": {
                "type": "string",
                "xpath": "(//span[@class='address-link']/text()|//span[@class='address-link']/a/text())[2]",
				"regex": "(.+) район"
			},
			"operation": {
                "type": "string",
                "xpath": "(//span[@itemprop='itemListElement']//span[@itemprop='name']/text())[2]",
				"regex": "Продажа|Купить|Снять|Аренда"
			},
			"seller_name": {
                "type": "string",
                "xpath": "//a[@class='seller-name']/text()|//span[@class='seller-name2']/text()"
            },
			"company_name": {
                "type": "string",
                "xpath": "//div[@class='seller-parent an']/span/text()|//div[@class='seller-parent an']/a/text()"
            },
			"phone": {
                "type": "phone",
                "xpath": "(//div[@class='button-like phone btn_call']/@data-phone)[1]"
            },
			"price_total": {
                "type": "float",
                "xpath": "(//span[@class='price-main']/text())[1]|(//div[@class='price-main'])[1]/text()"
            },
			"rent_price_per_area": {
                "type": "float",
                "xpath": "(//span[@class='price-metre']/text())[1]"
            },
			"price_term": {
                "type": "string",
                "xpath": "(//div[@class='price-main'])[1]/span/text()"
            },
			"description": {
                "type": "list to string",
                "xpath": "//div[@class='content-info']/text()|//details[@class='preview content-info']//text()"
            },
			"source_latitude":{
				"type": "float",
				"xpath":"//div[@id='map']/@data-center",
				"regex": "^\\d+\\W?\\d+"
			},
			"source_longitude":{
				"type": "float",
				"xpath":"//div[@id='map']/@data-center",
				"regex": "\\d+\\W?\\d+$"
			}
        },
        "tables": {
            "table_1": {
                "_keys_xpath": "//td[@class='param']/text()|//td[@class='param sub_area']/text()",
                "_vals_xpath": "//td[@class='value']/text()|//td[@class='value']/*/text()",
                "key_converter": {
					"актуально" : {
                            "name" : "date_updated",
                            "type" : "date",
                            "time" : "from string"
                        },
					"безопасность" : {
                            "name" : "in_save_object",
                            "type" : "string"
                        },
					"вид_на_море" : {
                            "name" : "is_view",
                            "type" : "string"
                        },
					"всего_квартир" : {
                            "name" : "cnt_apartments",
                            "type" : "float"
                        },
					"класс" : {
                            "name" : "object_class",
                            "type" : "string"
                        },
					"лифт" : {
                            "name" : "is_elevator",
                            "type" : "string"
                        },
					"отделка" : {
                            "name" : "decoration_type",
                            "type" : "string"
                        },
					"парковка" : {
                            "name" : "is_parking",
                            "type" : "string"
                        },
					"плита" : {
                            "name" : "is_owen",
                            "type" : "string"
                        },
					"площадь_квартир" : {
                            "name" : "apart_area_total",
                            "type" : "string"
                        },
					"площадь_общая" : {
                            "name" : "area_total",
                            "type" : "float",
							"regex" : "^\\d*\\W?\\d+"
                        },
					"просмотров" : {
                            "name" : "none",
                            "type" : "string",
							"regex" : ""
                        },
					"размещено" : {
                            "name" : "date_created",
                            "type" : "date",
                            "time" : "from string"
                        },
					"расстояние_до_моря" : {
                            "name" : ["distance_sea","distance_sea_unit"],
                            "type" : ["float", "string"],
							"regex": ["\\d*\\W?\\d+","[А-Яа-я]+"]
                        },
					"санузел" : {
                            "name" : "is_wc",
                            "type" : "string"
                        },
					"состояние" : {
                            "name" : "is_condition",
                            "type" : "string"
                        },
					"срок_сдачи" : {
                            "name" : "year_built",
                            "type" : "float",
							"regex": "\\d*\\W?\\d+"
                        },
					"статус" : {
                            "name" : "segment",
                            "type" : "string"
                        },
					"тип_здания" : {
                            "name" : "building_type",
                            "type" : "string"
                        },
					"этаж" : {
                            "name" : ["floor", "floors_cnt"],
                            "type" : ["float", "float"],
							"regex" : ["^\\d+","^\\d+$"]
                        },
					"этажей" : {
                            "name" : "floors_cnt",
                            "type" : "float"
                        },
					"высота_потолков" : {
                            "name" : "ceiling_height",
                            "type" : "float",
							"regex": "\\d*\\W?\\d+"
                        },
					"лоджия" : {
                            "name" : "is_balcony",
                            "type" : "string"
                        },
					"застройщик" : {
                            "name" : "developer_name",
                            "type" : "string"
                        },
					"класс_1" : {
                            "name" : "none",
                            "type" : "string"
                        },
					"класс_2" : {
                            "name" : "none",
                            "type" : "string"
                        },
					"жилая" : {
                            "name" : "area_living",
                            "type" : "float",
							"regex": "^\\d*\\W?\\d+"
                        },
					"сейсмостойкость" : {
                            "name" : "nan",
                            "type" : "string",
							"value": " "
                        },
					"балкон" : {
                            "name" : "is_balcony",
                            "type" : "string"
                        },
					"кухня" : {
                            "name" : "kitchen_area",
                            "type" : "float",
							"regex": "^\\d*\\W?\\d+"
                        },
					"планировка" : {
                            "name" : "layout_type",
                            "type" : "string"
                        },
					"электричество" : {
                            "name" : "is_electricity",
                            "type" : "string"
                        },
					"целевое_назначение" : {
                            "name" : "purpose",
                            "type" : "string"
                        },
					"площадь_участка" : {
                            "name" : ["land_area","area_land_unit"],
                            "type" : ["float","string"],
							"regex": ["^\\d*\\W?\\d+", "сот|га|гектар|соток|метров|километров"]
                        },
					"общая_площадь_дома" : {
                            "name" : "area_total",
                            "type" : "float",
							"regex": "^\\d*\\W?\\d+"
                        },
					"водоснабжение" : {
                            "name" : "is_plumbing",
                            "type" : "string"
                        },
					"газ" : {
                            "name" : "is_gas",
                            "type" : "string"
                        },
					"год_постройки" : {
                            "name" : "year_built",
                            "type" : "float"
                        },
					"канализация" : {
                            "name" : "is_sewage",
                            "type" : "float"
                        },
					"всего_коттеджей" : {
                            "name" : "nan",
                            "value" : " "
                        },
					"генподрядчик" : {
                            "name" : "nan",
                            "value" : " "
                        },
					"площадь_коттеджей" : {
                            "name" : "nan",
                            "value" : " "
                        },
					"вид_права" : {
                            "name" : "owner_type",
                            "type" : "string"
                        },
					"общая_площадь" : {
                            "name" : "area_total",
                            "type" : "float",
							"regex": "^\\d*\\W?\\d+"
                        },
					"интернет" : {
                            "name" : "is_internet",
                            "type" : "string"
                        },
					"комнат__номеров" : {
                            "name" : "rooms_cnt",
                            "type" : "float",
							"regex": "^\\d*\\W?\\d+"
                        },
					"право_на_землю" : {
                            "name" : "land_ownership",
                            "type" : "string"
                        },
					"телефон" : {
                            "name" : "is_phone",
                            "type" : "string"
                        },
					"разрешительные_документы" : {
                            "name" : "is_documents",
                            "type" : "string"
                        },
					"бассейн":  {
						"name": "is_swimming_pool",
						"type" : "string"
						},
					"отопление":  {
						"name": "heating_system_type",
						"type" : "string"
						},
					"баня__сауна":  {
						"name": "is_bathhouse",
						"type" : "string"
						}
					}
                }
            }
        }
    }



